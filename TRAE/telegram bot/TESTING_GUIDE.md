# 🧪 测试指南

## 🔧 **Mini App 访问测试**

### 1. 确认服务状态
- ✅ Vite 开发服务器：http://localhost:5173/
- ✅ Localtunnel 公网地址：https://cold-snails-return.loca.lt
- ✅ Bot 已更新 Mini App 链接

### 2. 测试步骤
1. **私聊测试Bot** → 发送 `/start`
2. **点击"🏪 成为商家"** → 完成入驻流程
3. **入驻成功后** → 点击"📱 打开管理后台"
4. **应该打开** → Telegram 内置浏览器显示 Mini App

### 3. 如果仍无法访问
- 检查 Telegram 是否允许访问外部链接
- 尝试点击 Telegram 右上角的"⋯"菜单 → "在浏览器中打开"
- 检查网络连接和防火墙设置

## 🔍 **群聊快速搜索测试**

### 1. 在群聊中测试
将机器人添加到群聊，然后测试以下命令：

```
S会所
S咖啡
S美发
S维修
S火锅
s 按摩
S 健身
```

### 2. 预期结果
- Bot 会自动识别 "S+关键词" 格式
- 返回相关商家搜索结果
- 显示商家基本信息（名称、评分、位置、距离）
- 提供"私聊获取联系方式"按钮

### 3. 功能特点
- ✅ 支持大小写 S/s
- ✅ 支持空格：`S 关键词` 或 `S关键词`
- ✅ 仅在群聊中生效（私聊不响应）
- ✅ 实时搜索，无需先激活功能

## 📝 **完整测试流程**

### 私聊功能测试
1. `/start` → 查看私聊主菜单
2. `/merchant` → 直接进入商家管理
3. `/help` → 查看帮助信息
4. `/about` → 查看平台信息
5. 商家入驻 → 6步完整流程
6. Mini App → 管理后台访问

### 群聊功能测试
1. `/start` → 查看群聊搜索菜单
2. `S会所` → 快速搜索功能
3. 点击按钮 → 常规搜索功能
4. 尝试商家入驻 → 应该提示私聊

## 🚨 **常见问题排查**

### Mini App 无法打开
1. 检查 tunnel 状态：`https://cold-snails-return.loca.lt`
2. 检查 Vite 服务器：`http://localhost:5173/`
3. 重启服务：重新运行测试Bot
4. 网络问题：尝试切换网络或使用VPN

### 快速搜索不响应
1. 确认在群聊中使用
2. 检查格式：`S关键词` 或 `S 关键词`
3. 查看控制台日志确认Bot收到消息
4. 确认Bot有群聊权限

## 🎯 **成功标准**

- [✅] 私聊中可完成商家入驻
- [✅] Mini App 能正常打开并显示管理后台
- [✅] 群聊中 "S+关键词" 能触发搜索
- [✅] 群聊搜索结果正确显示
- [✅] 私聊/群聊功能正确分离